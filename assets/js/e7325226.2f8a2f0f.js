"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9800],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>f});var r=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var c=r.createContext({}),l=function(e){var n=r.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=l(e.components);return r.createElement(c.Provider,{value:n},e.children)},m="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},u=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=l(t),u=o,f=m["".concat(c,".").concat(u)]||m[u]||p[u]||a;return t?r.createElement(f,i(i({ref:n},d),{},{components:t})):r.createElement(f,i({ref:n},d))}));function f(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,i=new Array(a);i[0]=u;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s[m]="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=t[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}u.displayName="MDXCreateElement"},66304:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>p,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var r=t(87462),o=(t(67294),t(3905));const a={slug:"/advanced/combine-systems"},i=void 0,s={unversionedId:"Getting Started/Advanced/Combining different systems or cores",id:"version-4.0/Getting Started/Advanced/Combining different systems or cores",title:"Combining different systems or cores",description:"Advanced",source:"@site/versioned_docs/version-4.0/Getting Started/Advanced/Combining different systems or cores.md",sourceDirName:"Getting Started/Advanced",slug:"/advanced/combine-systems",permalink:"/docs/4.0/advanced/combine-systems",draft:!1,editUrl:"https://github.com/OnionUI/Onion/edit/main/website/versioned_docs/version-4.0/Getting Started/Advanced/Combining different systems or cores.md",tags:[],version:"4.0",frontMatter:{slug:"/advanced/combine-systems"},sidebar:"tutorialSidebar",previous:{title:"Advanced",permalink:"/docs/4.0/advanced"},next:{title:"Resources",permalink:"/docs/4.0/category/resources"}},c={},l=[],d={toc:l},m="wrapper";function p(e){let{components:n,...t}=e;return(0,o.kt)(m,(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("p",null,(0,o.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/98862735/178853223-10d53d46-3d80-4d44-95d6-3cd345a730e1.png",alt:"Advanced"})),(0,o.kt)("p",null,"Below is an example ",(0,o.kt)("inlineCode",{parentName:"p"},"launch.sh")," script for combining different systems or cores inside on Emu/Roms folder. To get started you can copy any of the subfolders inside ",(0,o.kt)("inlineCode",{parentName:"p"},"Emu"),", as long as it contains a ",(0,o.kt)("inlineCode",{parentName:"p"},"launch.sh")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"config.json")," file. To set the name of the emu, edit the label inside ",(0,o.kt)("inlineCode",{parentName:"p"},"config.json"),". You also need to make sure the rom and image paths are pointing to the right folder in ",(0,o.kt)("inlineCode",{parentName:"p"},"Roms"),"."),(0,o.kt)("p",null,"The example is made up of three different core selection methods, you can include one or more of them depending on your needs. To find the correct core names, you can lookup the filename in ",(0,o.kt)("inlineCode",{parentName:"p"},"RetroArch/.retroarch/cores")," and remove the ",(0,o.kt)("inlineCode",{parentName:"p"},"_libretro.so")," part."),(0,o.kt)("p",null,"Edit the ",(0,o.kt)("inlineCode",{parentName:"p"},"launch.sh")," to contain the following (changing out the core names and keywords to fit your specific use-case):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh",metastring:"title='Emu/[SYSTEM]/launch.sh'",title:"'Emu/[SYSTEM]/launch.sh'"},'#!/bin/sh\necho $0 $*\nprogdir=`dirname "$0"`\nhomedir=`dirname "$1"`\n\n# Set the default core\ncore="mednafen_supafaust"\n')),(0,o.kt)("p",null,"The ",(0,o.kt)("inlineCode",{parentName:"p"},"core")," variable is initialized with the default core name, which will be used for unknown file extensions. Remember to either clear the ",(0,o.kt)("inlineCode",{parentName:"p"},"extlist")," in the ",(0,o.kt)("inlineCode",{parentName:"p"},"config.json")," file, or add all the supported extensions (be sure to add the lower- and uppercase versions)."),(0,o.kt)("p",null,"Below is the first method of choosing a core for the rom you want to launch. It's purely based on the file extension of the rom, and will only work if the cores you are choosing between use different file extensions. E.g. here we're creating a games folder that can contain PSX, SNES, and PC-Engine games."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh",metastring:"title='Emu/[SYSTEM]/launch.sh (continued)'",title:"'Emu/[SYSTEM]/launch.sh","(continued)'":!0},'# Select core based on file extension\ncase `echo "$(basename "$1")" | awk -F. \'{print tolower($NF)}\'` in\n    iso|cue|img|mdf|pbp|toc|cbn|m3u|ccd|chd)\n        core="pcsx_rearmed"\n        ;;\n    sfc|smc)\n        core="mednafen_supafaust"\n        ;;\n    pce)\n        core="mednafen_pce_fast"\n        ;;\n    *)\n        ;;\nesac\n')),(0,o.kt)("p",null,"Another way to select cores is by checking the name of the subfolder it is in. This will solve the problem of different cores accepting the same files. In our example we can know detect which core to use for games located in different subfolders. The PlayStation core will be used for roms located in ",(0,o.kt)("inlineCode",{parentName:"p"},"Roms/[ROMFOLDER]/PS")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"Roms/[ROMFOLDER]/PSX"),", and the SNES core will be used for the ",(0,o.kt)("inlineCode",{parentName:"p"},"SFC")," or ",(0,o.kt)("inlineCode",{parentName:"p"},"SNES")," subfolders, etc."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh",metastring:"title='Emu/[SYSTEM]/launch.sh (continued)'",title:"'Emu/[SYSTEM]/launch.sh","(continued)'":!0},'# Select core based on name of containing folder\ncase `echo "$(basename "$homedir")" | awk \'{print toupper($0)}\'` in\n    PS|PSX)\n        core="pcsx_rearmed"\n        ;;\n    SFC|SNES)\n        core="mednafen_supafaust"\n        ;;\n    PCE|PCECD)\n        core="mednafen_pce_fast"\n        ;;\n    *)\n        ;;\nesac\n')),(0,o.kt)("p",null,"A third way to select a core, is to check for keywords in the filename. Below I've made a switch case that selects a core based on different abbreviations in parentheses. To add more abbreviations be sure to add ",(0,o.kt)("inlineCode",{parentName:"p"},'*"([ABBR])"*')," with a ",(0,o.kt)("inlineCode",{parentName:"p"},"|")," as separator."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh",metastring:"title='Emu/[SYSTEM]/launch.sh (continued)'",title:"'Emu/[SYSTEM]/launch.sh","(continued)'":!0},'# Select core based on parentheses in filename\ncase `echo "$(basename "$1")" | awk \'{print toupper($0)}\'` in\n    *"(PS)"*|*"(PSX)"*)\n        core="pcsx_rearmed"\n        ;;\n    *"(SFC)"*|*"(SNES)"*)\n        core="mednafen_supafaust"\n        ;;\n    *"(PCE)"*|*"(PCECD)"*)\n        core="mednafen_pce_fast"\n        ;;\n    *)\n        ;;\nesac\n')),(0,o.kt)("p",null,"Lastly, we need to launch RetroArch with the selected core."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh",metastring:"title='Emu/[SYSTEM]/launch.sh (continued)'",title:"'Emu/[SYSTEM]/launch.sh","(continued)'":!0},"cd /mnt/SDCARD/RetroArch/\nHOME=/mnt/SDCARD/RetroArch/ ./retroarch -v -L '.retroarch/cores/'\"$core\"'_libretro.so' \"$1\"\n")))}p.isMDXComponent=!0}}]);