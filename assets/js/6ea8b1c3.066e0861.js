"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6749],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>h});var o=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=o.createContext({}),c=function(e){var n=o.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},d=function(e){var n=c(e.components);return o.createElement(l.Provider,{value:n},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},m=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),p=c(t),m=r,h=p["".concat(l,".").concat(m)]||p[m]||u[m]||a;return t?o.createElement(h,s(s({ref:n},d),{},{components:t})):o.createElement(h,s({ref:n},d))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,s=new Array(a);s[0]=m;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i[p]="string"==typeof e?e:r,s[1]=i;for(var c=2;c<a;c++)s[c]=t[c];return o.createElement.apply(null,s)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},70189:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var o=t(87462),r=(t(67294),t(3905));const a={slug:"/advanced/combine-systems"},s=void 0,i={unversionedId:"Resources/Advanced Guides/Combining different systems or cores",id:"version-4.1/Resources/Advanced Guides/Combining different systems or cores",title:"Combining different systems or cores",description:"Advanced",source:"@site/versioned_docs/version-4.1/Resources/Advanced Guides/Combining different systems or cores.md",sourceDirName:"Resources/Advanced Guides",slug:"/advanced/combine-systems",permalink:"/docs/4.1/advanced/combine-systems",draft:!1,editUrl:"https://github.com/OnionUI/Onion/edit/main/website/versioned_docs/version-4.1/Resources/Advanced Guides/Combining different systems or cores.md",tags:[],version:"4.1",frontMatter:{slug:"/advanced/combine-systems"},sidebar:"tutorialSidebar",previous:{title:"Scraping artwork for games",permalink:"/docs/4.1/scraping"},next:{title:"For Developers",permalink:"/docs/4.1/category/for-developers"}},l={},c=[{value:"Step 1: Set the default core",id:"step-1-set-the-default-core",level:2},{value:"Step 2.a: Select core based on file extension",id:"step-2a-select-core-based-on-file-extension",level:2},{value:"Step 2.b: Select core based on subfolders",id:"step-2b-select-core-based-on-subfolders",level:2},{value:"Step 2.c: Select core based on keywords",id:"step-2c-select-core-based-on-keywords",level:2},{value:"Step 3: Launch RetroArch with the selected core",id:"step-3-launch-retroarch-with-the-selected-core",level:2}],d={toc:c},p="wrapper";function u(e){let{components:n,...t}=e;return(0,r.kt)(p,(0,o.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null),(0,r.kt)("table",null,(0,r.kt)("td",null,(0,r.kt)("p",null,"Download the files used in this example:  "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"})))),(0,r.kt)("p",null,"Below is an example ",(0,r.kt)("inlineCode",{parentName:"p"},"launch.sh")," script for combining different systems or cores inside one Emu/Roms folder. To get started you can copy any of the subfolders inside ",(0,r.kt)("inlineCode",{parentName:"p"},"Emu"),", as long as it contains a ",(0,r.kt)("inlineCode",{parentName:"p"},"launch.sh")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"config.json")," file, or you can download the zip provided below."),(0,r.kt)("p",null,"To set the name of the system/collection edit the label inside ",(0,r.kt)("inlineCode",{parentName:"p"},"config.json"),", replacing ",(0,r.kt)("inlineCode",{parentName:"p"},"My Label")," with the name you want. You also need to make sure the rom and image paths are pointing to the right folder in ",(0,r.kt)("inlineCode",{parentName:"p"},"Roms"),". You can change the names of the folders ",(0,r.kt)("inlineCode",{parentName:"p"},"Emu/EXAMPLE")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"Roms/EXAMPLE"),", replacing ",(0,r.kt)("inlineCode",{parentName:"p"},"EXAMPLE")," with whatever name you want (the name shouldn't contain any spaces, preferably you should only use the characters ",(0,r.kt)("inlineCode",{parentName:"p"},"A-Z")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"0-9"),")."),(0,r.kt)("p",null,"The example is made up of three different core selection methods, you can include one or more of them depending on your needs. To find the correct core names, you can lookup the filename in ",(0,r.kt)("inlineCode",{parentName:"p"},"RetroArch/.retroarch/cores"),"."),(0,r.kt)("h2",{id:"step-1-set-the-default-core"},"Step 1: Set the default core"),(0,r.kt)("p",null,"Edit the ",(0,r.kt)("inlineCode",{parentName:"p"},"launch.sh")," to contain the following (changing out the core names and keywords to fit your specific use-case):"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Emu/EXAMPLE/launch.sh")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'#!/bin/sh\necho $0 $*\nprogdir=`dirname "$0"`\nhomedir=`dirname "$1"`\n\n# Set the default core\ncore="mednafen_supafaust_libretro.so"\n')),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"core")," variable is initialized with the default core name, which will be used for unknown file extensions. Remember to either clear the ",(0,r.kt)("inlineCode",{parentName:"p"},"extlist")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"config.json")," file, or add all the supported extensions (be sure to add the lower- and uppercase versions)."),(0,r.kt)("h2",{id:"step-2a-select-core-based-on-file-extension"},"Step 2.a: Select core based on file extension"),(0,r.kt)("p",null,"Below is the first method of choosing a core for the rom you want to launch. It's purely based on the file extension of the rom, and will only work if the cores you are choosing between use different file extensions. E.g. here we're creating a games folder that can contain PSX, SNES, and PC-Engine games."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Emu/EXAMPLE/launch.sh")," ",(0,r.kt)("em",{parentName:"p"},"(continued)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'# Select core based on file extension\ncase `echo "$(basename "$1")" | awk -F. \'{print tolower($NF)}\'` in\n    iso|cue|img|mdf|pbp|toc|cbn|m3u|ccd|chd)\n        core="pcsx_rearmed_libretro.so"\n        ;;\n    sfc|smc)\n        core="mednafen_supafaust_libretro.so"\n        ;;\n    pce)\n        core="mednafen_pce_fast_libretro.so"\n        ;;\n    *)\n        ;;\nesac\n')),(0,r.kt)("h2",{id:"step-2b-select-core-based-on-subfolders"},"Step 2.b: Select core based on subfolders"),(0,r.kt)("p",null,"Another way to select cores is by checking the name of the subfolder it is in. This will solve the problem of different cores accepting the same files. In our example we can know detect which core to use for games located in different subfolders. The PlayStation core will be used for roms located in ",(0,r.kt)("inlineCode",{parentName:"p"},"Roms/EXAMPLE/PS")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"Roms/EXAMPLE/PSX"),", and the SNES core will be used for the ",(0,r.kt)("inlineCode",{parentName:"p"},"SFC")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"SNES")," subfolders, etc."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Emu/EXAMPLE/launch.sh")," ",(0,r.kt)("em",{parentName:"p"},"(continued)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'# Select core based on name of containing folder\ncase `echo "$(basename "$homedir")" | awk \'{print toupper($0)}\'` in\n    PS|PSX)\n        core="pcsx_rearmed_libretro.so"\n        ;;\n    SFC|SNES)\n        core="mednafen_supafaust_libretro.so"\n        ;;\n    PCE|PCECD)\n        core="mednafen_pce_fast_libretro.so"\n        ;;\n    *)\n        ;;\nesac\n')),(0,r.kt)("h2",{id:"step-2c-select-core-based-on-keywords"},"Step 2.c: Select core based on keywords"),(0,r.kt)("p",null,"A third way to select a core, is to check for keywords in the filename. Below I've made a switch case that selects a core based on different abbreviations in parentheses. To add more abbreviations be sure to add ",(0,r.kt)("inlineCode",{parentName:"p"},'*"([ABBR])"*')," with a ",(0,r.kt)("inlineCode",{parentName:"p"},"|")," as separator."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Emu/EXAMPLE/launch.sh")," ",(0,r.kt)("em",{parentName:"p"},"(continued)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'# Select core based on parentheses in filename\ncase `echo "$(basename "$1")" | awk \'{print toupper($0)}\'` in\n    *"(PS)"*|*"(PSX)"*)\n        core="pcsx_rearmed_libretro.so"\n        ;;\n    *"(SFC)"*|*"(SNES)"*)\n        core="mednafen_supafaust_libretro.so"\n        ;;\n    *"(PCE)"*|*"(PCECD)"*)\n        core="mednafen_pce_fast_libretro.so"\n        ;;\n    *)\n        ;;\nesac\n')),(0,r.kt)("h2",{id:"step-3-launch-retroarch-with-the-selected-core"},"Step 3: Launch RetroArch with the selected core"),(0,r.kt)("p",null,"Lastly, we need to launch RetroArch with the selected core."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"Emu/EXAMPLE/launch.sh")," ",(0,r.kt)("em",{parentName:"p"},"(continued)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'cd /mnt/SDCARD/RetroArch/\nHOME=/mnt/SDCARD/RetroArch/ ./retroarch -v -L ".retroarch/cores/$core" "$1"\n')))}u.isMDXComponent=!0}}]);